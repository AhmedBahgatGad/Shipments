<div class="container vh-100">
  <h1 class="mt-3 mb-4 ms-2">Add Merchant</h1>

  <div class="container rounded-4 p-5 m-auto bg-white shadow">
    <form [formGroup]="merchantForm" (ngSubmit)="handleForm()">
      <div class="row">
        <div class="mb-3 col-md-6">
          <label class="form-label" for="name">Full Name</label>
          <input
            type="text"
            class="form-control"
            id="name"
            formControlName="name"
            #inputMerchantName
            placeholder="Enter Merchant Name"
            name="fullName"
          />
          @if ( merchantForm.get('name')?.errors &&
          (merchantForm.get('name')?.touched ||
          inputMerchantName.value.length > 0) ) {
          <div class="alert alert-danger mt-2">
            @if (merchantForm.get('name')?.getError('required')) {
            <p>Merchant Name Required</p>
            }
          </div>
          }
        </div>
        <div class="mb-3 col-md-6">
          <label class="form-label" for="username">User Name</label>
          <input
            type="text"
            class="form-control"
            id="userName"
            formControlName="username"
            #inputUserName
            placeholder="Enter User Name"
            name="username"
          />
          @if ( merchantForm.get('username')?.errors &&
          (merchantForm.get('username')?.touched ||
          inputUserName.value.length > 0) ) {
          <div class="alert alert-danger mt-2">
            @if (merchantForm.get('username')?.getError('required')) {
            <p>User Name Required</p>
            }
          </div>
          }
        </div>

        <div class="mb-3 col-md-6">
          <label class="form-label" for="phone">Phone</label>
          <input
            type="tel"
            class="form-control"
            id="phone"
            formControlName="phone"
            placeholder="Enter Merchant Phone"
            #inputPhone
            name="Phone"
          />
          @if ( merchantForm.get('phone')?.errors &&
          (merchantForm.get('phone')?.touched || inputPhone.value.length > 0) )
          {
          <div class="alert alert-danger mt-2">
            @if (merchantForm.get('phone')?.getError('required')) {
            <p>Merchant Phone Required</p>
            }
          </div>
          }
        </div>

        <div class="mb-3 col-md-6">
          <label class="form-label" for="Email">Email</label>
          <input
            type="email"
            class="form-control"
            id="email"
            formControlName="email"
            placeholder="Enter Employee Email"
            #inputEmail
            name="Email"
          />
          @if ( merchantForm.get('email')?.errors &&
          (merchantForm.get('email')?.touched || inputEmail.value.length > 0) )
          {
          <div class="alert alert-danger mt-2">
            @if (merchantForm.get('email')?.getError('required')) {
            <p>Email Required</p>
            } @if (merchantForm.get('email')?.getError('email')) {
            <p>Email Invalid</p>
            }
          </div>
          }
        </div>

        <div class="mb-3 col-md-6">
          <label class="form-label" for="password">Password</label>
          <input
            type="password"
            class="form-control"
            id="password"
            formControlName="password"
            placeholder="Enter Merchant Password"
            #inputPassword
            name="password"
          />
          @if ( merchantForm.get('password')?.errors &&
          (merchantForm.get('password')?.touched || inputPassword.value.length >
          0) ) {
          <div class="alert alert-danger mt-2">
            @if (merchantForm.get('password')?.getError('required')) {
            <p>Password Required</p>
            }
          </div>
          }
        </div>

        <div class="mb-3 col-md-6">
          <label class="form-label" for="address">Address</label>
          <input
            type="text"
            class="form-control"
            id="address"
            formControlName="address"
            placeholder="Enter Merchant Address"
            #inputAddress
            name="address"
          />
          @if ( merchantForm.get('address')?.errors &&
          (merchantForm.get('address')?.touched || inputAddress.value.length >
          0) ) {
          <div class="alert alert-danger mt-2">
            @if (merchantForm.get('address')?.getError('required')) {
            <p>Address Required</p>
            }
          </div>
          }
        </div>

        <div class="mb-3 col-md-6">
          <label for="branch" class="form-label">Branch :</label>
          <select
            name="branch"
            class="form-select"
            id="branch"
            formControlName="branch_id"
          >
            @for (branch of branches; track $index) {
            <option [value]="branch.id">{{ branch.name }}</option>
            }
          </select>
        </div>
        <div class="mb-3 col-md-6">
          <label class="form-label" for="shopname">Shop Name</label>
          <input
            type="text"
            class="form-control"
            id="shopname"
            formControlName="company_name"
            placeholder="Enter Merchant Shop Name"
            #inputShopName
            name="shopname"
          />

          @if ( merchantForm.get('company_name')?.errors &&
          (merchantForm.get('company_name')?.touched || inputShopName.value.length >
          0) ) {
          <div class="alert alert-danger mt-2">
            @if (merchantForm.get('company_name')?.getError('required')) {
            <p>shop name Required</p>
            }
          </div>
          }
        </div>
      </div>
      <div class="row">
        <div class="col-md-6">
          <button class="btn price">
            <a href="./pricepackages">Add Price Packages</a>
          </button>
        </div>
        <div class="col-md-6 d-flex justify-content-end align-items-end">
          <button class="btn merchant">Add Merchant</button>
        </div>
      </div>
    </form>
  </div>
</div>
