<div class="container">
  <h1 class="mt-3 mb-4 ms-2">Add Employee</h1>

  <div class="container rounded-4 p-5 m-auto bg-white shadow">
    <form [formGroup]="employeesForm" (ngSubmit)="handleForm()">
      <div class="row">
        <div class="mb-3 col-md-6">
          <label class="form-label" for="name">Full Name</label>
          <input
            type="text"
            placeholder="Enter Employee Name"
            id="name"
            name="fullName"
            class="form-control"
            formControlName="name"
            #inputName
          />
          @if(employeesForm.get("name")?.errors&&(employeesForm.get("name")?.touched
          || inputName.value.length>0)){
          <div class="alert alert-danger mt-2">
            @if(employeesForm.get("name")?.getError("required")){
            <p>Employee Name Required</p>
            }
          </div>
          }
        </div>
        <div class="mb-3 col-md-6">
          <label class="form-label" for="username">User Name</label>
          <input
            type="text"
            placeholder="Enter Employee User Name"
            id="username"
            name="username"
            class="form-control"
            formControlName="username"
            #inputUserName
          />
          @if(employeesForm.get("username")?.errors&&(employeesForm.get("username")?.touched
          || inputUserName.value.length>0)){
          <div class="alert alert-danger mt-2">
            @if(employeesForm.get("username")?.getError("required")){
            <p>Employee Name Required</p>
            }
          </div>
          }
        </div>

        <div class="mb-3 col-md-6">
          <label class="form-label" for="phone">Phone</label>
          <input
            type="tel"
            placeholder="Enter Employee Phone"
            id="phone"
            name="Phone"
            class="form-control"
            formControlName="phone"
            #inputPhone
          />
          @if (employeesForm.get("phone")?.errors &&
          (employeesForm.get("phone")?.touched || inputPhone.value.length>0)) {
          <div class="alert alert-danger">
            @if(employeesForm.get("phone")?.getError("required")){
            <p>Employee Phone Required</p>
            }
          </div>
          }
        </div>

        <div class="mb-3 col-md-6">
          <label class="form-label" for="address">Address</label>
          <input
            type="text"
            placeholder="Enter Employee Address"
            id="address"
            name="address"
            class="form-control"
            formControlName="address"
            #inputAddress
          />
          @if (employeesForm.get("address")?.errors &&
          (employeesForm.get("address")?.touched ||
          inputAddress.value.length>0)) {
          <div class="alert alert-danger">
            @if (employeesForm.get("phone")?.getError("required")) {
            <p>Employee Address Required</p>
            }
          </div>
          }
        </div>

        <div class="mb-3 col-md-6">
          <label class="form-label" for="email">Email</label>
          <input
            type="email"
            placeholder="Enter Employee Email"
            id="email"
            name="email"
            class="form-control"
            formControlName="email"
            #inputEmail
          />
          @if (employeesForm.get("email")?.errors &&
          (employeesForm.get("email")?.touched || inputEmail.value.length>0)) {
          <div class="alert alert-danger">
            @if (employeesForm.get("email")?.getError("required")) {
            <p>Employee Email Required</p>
            }@else if (employeesForm.get("email")?.getError("email")) {
            <p>Employee Email UnValid</p>
            }
          </div>
          }
        </div>

        <div class="mb-3 col-md-6">
          <label class="form-label" for="password">Password</label>
          <input
            type="password"
            placeholder="Enter Employee Password"
            id="password"
            name="password"
            class="form-control"
            formControlName="password"
            #inputPassword
          />
          @if (employeesForm.get("password")?.errors &&
          (employeesForm.get("password")?.touched ||
          inputPassword.value.length>0)) {
          <div class="alert alert-danger">
            @if (employeesForm.get("password")?.getError("required")) {
            <p>Employee Password Required</p>
            }
          </div>
          }
        </div>

        <div class="mb-3 col-md-6">
          <label class="form-label" for="branch">Branch</label>
          <select
            class="form-select"
            id="branch"
            formControlName="branch_id"
            #inputBranch
          >
            @for (branch of branches; track $index) {
            <option [value]="branch.id">{{ branch.name }}</option>
            }
          </select>
          @if (employeesForm.get("branch_id")?.errors &&
          (employeesForm.get("branch_id")?.touched || inputBranch.value.length >
          0)) {
          <div class="alert alert-danger">
            @if (employeesForm.get("branch_id")?.getError("required")) {
            <p>Employee Branch Required</p>
            }
          </div>
          }
        </div>

        <div class="mb-3 col-md-6">
          <label class="form-label" for="compName">Company Name</label>
          <input
            type="text"
            placeholder="Enter Company Name"
            id="compName"
            name="compName"
            class="form-control"
            formControlName="company_name"
            #inputCompanyName
          />
          @if (employeesForm.get("company_name")?.errors &&
          (employeesForm.get("company_name")?.touched ||
          inputCompanyName.value.length > 0)) {
          <div class="alert alert-danger">
            @if (employeesForm.get("company_name")?.getError("required")) {
            <p>Employee Company Name required</p>
            }
          </div>
          }
        </div>

        <div class="mb-3 col-md-6">
          <label class="form-label" for="group">Group</label>
          <select
            class="form-select"
            id="group"
            formControlName="group_id"
            #inputGroup
          >
            @for (group of groups; track $index) {
            <option [value]="group.id">{{ group.name }}</option>
            }
          </select>
          @if (employeesForm.get("group_id")?.errors &&
          (employeesForm.get("group_id")?.touched || inputGroup.value.length >
          0)) {
          <div class="alert alert-danger">
            @if (employeesForm.get("group_id")?.getError("required")) {
            <p>Employee Group required</p>
            }
          </div>
          }
        </div>

        <div class="col-md-6 d-flex justify-content-end align-items-end">
          <button class="btn">{{ isEditMode ? 'Update Employee' : 'Add Employee' }}</button>
        </div>
      </div>
    </form>
  </div>
  <button class="btn"><a href="../employees">Back</a></button>
</div>
